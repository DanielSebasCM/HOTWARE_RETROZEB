<!-- MAIN -->
<section class="dashboard">

  <div class="banner">
    <div class="banner__section">
      <h1 class="title">Equipos <span class="meta"> (<%=userTeams.length + availableTeams.length %>)</span></h1>
      <p class="description">
        Visualiza tu equipo o selecciona uno al cual unirte
      </p>
    </div>
    <div class="banner__section">
      <a class="button button--primary" href="#">Crear Equipo</a>
    </div>
  </div>
  <span class="line"></span>

  <!-- USER TEAMS -->
  <div class="banner banner--nomargin">
    <h2 class="subtitle">Mis Equipos <span class="meta">
        (<%=userTeams.length %>)
      </span>
    </h2>
  </div>
  <% if(userTeams && userTeams.length> 0) { %>
    <div class="cards-container">
      <% for(let i=0; i < userTeams.length; i++) { %>
        <div class="card card--team">
          <h3 class="card__title">
            <%= userTeams[i].name %>
          </h3>
          <span class="line"></span>
          <p class="card__subtitle">
            Miembros <span class="meta"> (<%=userTeams[i].members.length %>) </span>
          </p>
          <div class="users__list">
            <% for(let j=0; j < userTeams[i].members.length; j++) { %>
              <div class="user__item">
                <span class="user__avatar">
                  <%= userTeams[i].members[j].first_name[0] %>
                </span>
                <span class="user__name">
                  <%= userTeams[i].members[j].first_name%>
                    <%= userTeams[i].members[j].last_name%>
                </span>
              </div>
              <% } %>
          </div>
          <button class="button button--delete-alt remove-team-user-btn card__footer" data-uid=<%=locals.currentUser.uid
            %>
            data-id_team=<%=userTeams[i].id %>
              >Abandonar equipo</button>
        </div>
        <% } %>
          <% } %>
</section>
<span class="line"></span>

<!-- ALL TEAMS -->
<div class="banner banner--nomargin">
  <h2 class="subtitle">
    Todos los equipos
    <span class="meta"> (<%=availableTeams.length %>) </span>
  </h2>
  <div class="toggle-buttons-container toggle-buttons-container--primary">
    <button class="toggle-button toggle-button--active">Activo</button>
    <button class="toggle-button">Inactivo</button>
  </div>
</div>
<!-- TEAMS LIST -->
<% if(availableTeams && availableTeams.length> 0) { %>
  <div class="cards-container">
    <% for(let i=0; i < availableTeams.length; i++) { %>
      <div class="card card--team">
        <h3 class="card__title">
          <%= availableTeams[i].name %>
        </h3>
        <span class="line"></span>
        <p class="card__subtitle">
          Miembros <span class="meta"> (<%=availableTeams[i].members.length %>) </span>
        </p>
        <div class="users__list">
          <% for(let j=0; j < availableTeams[i].members.length; j++) { %>
            <div class="user__item">
              <span class="user__avatar">
                <%= availableTeams[i].members[j].first_name[0] %>
              </span>
              <span class="user__name">
                <%= availableTeams[i].members[j].first_name%>
                  <%= availableTeams[i].members[j].last_name%>
              </span>
            </div>
            <% } %>
        </div>
        <button class="button button--primary add-team-user-btn card__footer" data-uid=<%=locals.currentUser.uid %>
          data-id_team=<%=availableTeams[i].id %>>
            Unirme
        </button>
      </div>
      <% } %>
        <% } %>
          </section>

          <script src="/assets/js/team.js"></script>